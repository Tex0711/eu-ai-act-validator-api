---
export const prerender = false;
export const dynamic = 'force-dynamic';
import Layout from '../layouts/Layout.astro';

const gatekeeperRequest = `POST /api/v1/gatekeeper
Content-Type: application/json
x-api-key: <your-api-key>

{
  "prompt": "Summarize this contract for our legal team.",
  "context": { "department": "legal" }
}`;

const gatekeeperResponse = `{
  "decision": "ALLOW",
  "reason": "No prohibited practices identified.",
  "article_ref": null,
  "audit_id": "550e8400-e29b-41d4-a716-446655440000"
}`;

const mermaidDiagram = `graph TD
  User((User/App)) -->|Prompt| Gatekeeper[API Gatekeeper]
  Gatekeeper -->|Step 1| PII[PII Stripper - Rust Engine]
  PII -->|Masked Prompt| Logic{Decision Logic}
  Logic -->|Deterministic| Rust[Fast-path Compliance - Rust]
  Logic -->|Nuanced| LLM[Deep Analysis - LLM]
  Rust -->|ALLOW/DENY| Result
  LLM -->|ALLOW/DENY/WARN| Result
  Result --> Audit[Audit Log - GDPR Proof]
  Result --> User`;
---

<Layout title="ComplianceCode.eu | High-performance EU AI Act Compliance Firewall">
  <div class="bg-cyber-bg min-h-screen text-slate-200">
    <!-- Hero: grid overlay, scanline, neon glow, glassmorphism -->
    <section class="relative overflow-hidden border-b border-cyber-neon/30">
      <div class="absolute inset-0 bg-[linear-gradient(rgba(0,243,255,0.04)_1px,transparent_1px),linear-gradient(90deg,rgba(0,243,255,0.04)_1px,transparent_1px)] bg-[size:4rem_4rem]" aria-hidden="true" />
      <div class="absolute inset-0 bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,243,255,0.03)_2px,rgba(0,243,255,0.03)_4px)] pointer-events-none" aria-hidden="true" />
      <div class="absolute inset-0 shadow-[inset_0_0_80px_rgba(0,243,255,0.06)] pointer-events-none" aria-hidden="true" />
      <div class="relative max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-20 sm:py-28 text-center">
        <span class="inline-block px-3 py-1 text-xs font-semibold text-cyber-neon bg-cyber-neon/10 border border-cyber-neon/50 rounded-full mb-6 backdrop-blur-sm shadow-[0_0_20px_rgba(0,243,255,0.2)]">Beta – Early Access</span>
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-4 tracking-tight drop-shadow-[0_0_30px_rgba(0,243,255,0.15)]">
          High-performance EU AI Act Compliance Firewall
        </h1>
        <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-10">
          Real-time risk assessment & PII stripping for the AI era. Sub-second decisions, GDPR-proof audit logs.
        </p>
        <div class="flex flex-wrap justify-center gap-4">
          <a
            href="https://github.com/Tex0711/eu-ai-act-validator-api"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center px-6 py-3 rounded-xl text-cyber-bg font-semibold bg-cyber-neon hover:bg-cyber-neon/90 border border-cyber-neon transition shadow-[0_0_25px_rgba(0,243,255,0.4)] hover:shadow-[0_0_20px_rgba(0,243,255,0.2)] hover:shadow-[0_0_35px_rgba(0,243,255,0.5)] backdrop-blur-sm"
          >
            View on GitHub
            <svg class="ml-2 w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a
            href="https://github.com/Tex0711/eu-ai-act-validator-api/raw/main/docs/ComplianceCode-Gatekeeper.postman_collection.json"
            class="inline-flex items-center px-6 py-3 rounded-xl font-semibold text-cyber-neon bg-white/5 hover:bg-cyber-neon/10 border border-cyber-neon/50 transition shadow-[0_0_20px_rgba(0,243,255,0.15)] hover:shadow-[0_0_20px_rgba(0,243,255,0.2)] hover:shadow-[0_0_25px_rgba(0,243,255,0.25)] backdrop-blur-sm"
          >
            Get Postman Collection
            <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
          </a>
        </div>
      </div>
    </section>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <!-- Bento Grid: Solution + Performance (asymmetric blocks) -->
      <section class="mb-20">
        <h2 class="text-3xl font-bold text-white mb-10 text-center drop-shadow-[0_0_20px_rgba(0,243,255,0.1)]">Solution &amp; Performance</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
          <!-- Ultra-Fast Rust (wide) -->
          <div class="md:col-span-2 rounded-2xl border border-cyber-neon/40 bg-white/[0.03] backdrop-blur-lg p-6 shadow-[0_0_40px_rgba(0,243,255,0.12)] hover:shadow-[0_0_50px_rgba(0,243,255,0.18)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <div class="flex items-center gap-2 mb-4">
              <span class="text-cyber-neon font-bold text-lg drop-shadow-[0_0_15px_rgba(0,243,255,0.3)]">Ultra-Fast Rust</span>
            </div>
            <p class="text-slate-400 text-sm leading-relaxed mb-3">
              Core compliance checks and PII stripping run on a dedicated Rust engine. Deterministic rule-sets deliver &lt;50&nbsp;ms decisions on the fast path, with PII stripping in the microsecond range so the privacy layer adds no perceptible delay.
            </p>
            <p class="text-cyber-emerald text-xs font-medium">P99 &lt; 1 ms · Zero-allocation · Rule-based</p>
          </div>
          <!-- Deep Analysis LLM -->
          <div class="rounded-2xl border border-cyber-neon/40 bg-white/[0.03] backdrop-blur-lg p-6 shadow-[0_0_40px_rgba(0,243,255,0.12)] hover:shadow-[0_0_50px_rgba(0,243,255,0.18)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <div class="flex items-center gap-2 mb-4">
              <span class="text-cyber-neon font-bold text-lg drop-shadow-[0_0_15px_rgba(0,243,255,0.3)]">Deep Analysis (LLM)</span>
            </div>
            <p class="text-slate-400 text-sm leading-relaxed mb-3">
              When nuance is required, the same pipeline routes to an LLM for deep analysis. Model-agnostic: use Gemini, Claude, or local models via <code class="text-cyber-neon/90">LLM_PROVIDER</code>. Intelligent routing minimizes LLM calls without sacrificing accuracy—validated against 36+ EU AI Act scenarios.
            </p>
            <p class="text-cyber-emerald text-xs font-medium">2–4 s when needed · ALLOW/DENY/WARN · Article refs</p>
          </div>
          <!-- Performance metrics (full width) -->
          <div class="md:col-span-3 rounded-2xl border border-cyber-neon/40 bg-white/[0.03] backdrop-blur-lg p-6 shadow-[0_0_40px_rgba(0,243,255,0.12)] hover:shadow-[0_0_50px_rgba(0,243,255,0.18)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <div class="flex items-center gap-2 mb-4">
              <span class="text-cyber-neon font-bold text-lg drop-shadow-[0_0_15px_rgba(0,243,255,0.3)]">Performance</span>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
              <div>
                <div class="text-cyber-emerald font-bold text-xl">P99 &lt; 1 ms</div>
                <div class="text-slate-500 text-xs">PII stripping</div>
              </div>
              <div>
                <div class="text-cyber-emerald font-bold text-xl">&lt;50 ms</div>
                <div class="text-slate-500 text-xs">Fast path</div>
              </div>
              <div>
                <div class="text-cyber-emerald font-bold text-xl">100%</div>
                <div class="text-slate-500 text-xs">36 scenarios</div>
              </div>
              <div>
                <div class="text-cyber-emerald font-bold text-xl">500+</div>
                <div class="text-slate-500 text-xs">Concurrent users</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Workflow: Mermaid diagram (electric styling) -->
      <section class="mb-20">
        <h2 class="text-3xl font-bold text-white mb-10 text-center drop-shadow-[0_0_20px_rgba(0,243,255,0.1)]">Workflow</h2>
        <div class="rounded-2xl border border-cyber-neon/40 bg-white/[0.03] backdrop-blur-lg p-6 overflow-x-auto shadow-[0_0_30px_rgba(0,243,255,0.08)] focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
          <pre class="mermaid text-center bg-transparent border-0 p-0 m-0">{mermaidDiagram}</pre>
        </div>
      </section>

      <!-- Enforcement vs Surveillance (DPO mission statement) -->
      <section class="mb-20">
        <h2 class="text-3xl font-bold text-white mb-10 text-center drop-shadow-[0_0_20px_rgba(0,243,255,0.1)]">Enforcement vs Surveillance</h2>
        <p class="text-slate-400 text-center max-w-2xl mx-auto mb-10 leading-relaxed">
          ComplianceCode.eu acts as an essential gatekeeper, ensuring adherence to the EU AI Act without infringing on privacy or data sovereignty. We don't watch your users; we protect your data.
        </p>
        <div class="grid md:grid-cols-3 gap-6">
          <div class="rounded-2xl border border-cyber-emerald/40 bg-white/[0.03] backdrop-blur-lg p-6 text-center shadow-[0_0_30px_rgba(16,185,129,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.15)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <h3 class="text-cyber-emerald font-bold text-lg mb-2">Proactive Protection</h3>
            <p class="text-slate-400 text-sm">Block prohibited practices before they reach your AI stack. Real-time guardrails, not after-the-fact monitoring.</p>
          </div>
          <div class="rounded-2xl border border-cyber-emerald/40 bg-white/[0.03] backdrop-blur-lg p-6 text-center shadow-[0_0_30px_rgba(16,185,129,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.15)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <h3 class="text-cyber-emerald font-bold text-lg mb-2">Data Privacy</h3>
            <p class="text-slate-400 text-sm">PII stripped before processing. Only masked prompts and audit metadata are stored—GDPR-proof by design.</p>
          </div>
          <div class="rounded-2xl border border-cyber-emerald/40 bg-white/[0.03] backdrop-blur-lg p-6 text-center shadow-[0_0_30px_rgba(16,185,129,0.1)] hover:shadow-[0_0_40px_rgba(16,185,129,0.15)] transition-shadow focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
            <h3 class="text-cyber-emerald font-bold text-lg mb-2">Legal Adherence</h3>
            <p class="text-slate-400 text-sm">EU AI Act Article 5 and high-risk provisions. Clear ALLOW/DENY/WARNING with article references for compliance teams.</p>
          </div>
        </div>
      </section>

      <!-- Live API Preview: macOS-style terminal -->
      <section class="mb-20">
        <h2 class="text-3xl font-bold text-white mb-6 text-center drop-shadow-[0_0_20px_rgba(0,243,255,0.1)]">Live API Preview</h2>
        <p class="text-slate-400 text-center mb-6 max-w-xl mx-auto">See how a <code class="text-cyber-neon/90 bg-cyber-neon/10 px-1.5 py-0.5 rounded">/gatekeeper</code> request and response look.</p>
        <div class="rounded-2xl border border-cyber-neon/40 bg-white/[0.03] backdrop-blur-lg overflow-hidden shadow-[0_0_30px_rgba(0,243,255,0.08)] focus-within:ring-2 focus-within:ring-cyber-neon/50 focus-within:ring-offset-2 focus-within:ring-offset-cyber-bg">
          <!-- macOS terminal header: three dots + Live Node -->
          <div class="flex items-center gap-3 border-b border-cyber-neon/20 bg-black/40 px-4 py-3">
            <div class="flex gap-2">
              <span class="w-3 h-3 rounded-full bg-[#ff5f57]" aria-hidden="true" />
              <span class="w-3 h-3 rounded-full bg-[#febc2e]" aria-hidden="true" />
              <span class="w-3 h-3 rounded-full bg-[#28c840]" aria-hidden="true" />
            </div>
            <div class="flex-1 flex justify-center">
              <span class="text-slate-500 text-xs font-mono">gatekeeper — bash</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="relative flex h-2 w-2" aria-hidden="true">
                <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-cyber-emerald opacity-75" />
                <span class="relative inline-flex h-2 w-2 rounded-full bg-cyber-emerald" />
              </span>
              <span class="text-cyber-emerald text-xs font-mono">Live Node: EU-West-1</span>
            </div>
          </div>
          <div class="border-b border-cyber-neon/20 px-4 py-2 text-xs font-medium text-slate-500 bg-black/30">Request</div>
          <pre class="p-4 text-sm text-slate-300 font-mono overflow-x-auto bg-black/20"><code>{gatekeeperRequest}</code></pre>
          <div class="border-b border-cyber-neon/20 px-4 py-2 text-xs font-medium text-slate-500 bg-black/30">Response</div>
          <pre class="p-4 text-sm text-cyber-emerald font-mono overflow-x-auto bg-black/20"><code>{gatekeeperResponse}</code></pre>
        </div>
      </section>

      <!-- CTAs again -->
      <section class="mb-20 text-center">
        <div class="flex flex-wrap justify-center gap-4">
          <a
            href="https://github.com/Tex0711/eu-ai-act-validator-api"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center px-6 py-3 rounded-xl text-cyber-bg font-semibold bg-cyber-neon hover:bg-cyber-neon/90 border border-cyber-neon transition shadow-[0_0_25px_rgba(0,243,255,0.4)] hover:shadow-[0_0_20px_rgba(0,243,255,0.2)] hover:shadow-[0_0_35px_rgba(0,243,255,0.5)] backdrop-blur-sm"
          >
            View on GitHub
          </a>
          <a
            href="https://github.com/Tex0711/eu-ai-act-validator-api/raw/main/docs/ComplianceCode-Gatekeeper.postman_collection.json"
            class="inline-flex items-center px-6 py-3 rounded-xl font-semibold text-cyber-neon bg-white/5 hover:bg-cyber-neon/10 border border-cyber-neon/50 transition shadow-[0_0_20px_rgba(0,243,255,0.15)] hover:shadow-[0_0_20px_rgba(0,243,255,0.2)] hover:shadow-[0_0_25px_rgba(0,243,255,0.25)] backdrop-blur-sm"
          >
            Get Postman Collection
          </a>
        </div>
      </section>

      <!-- Landing footer tagline -->
      <footer class="pt-8 pb-12 border-t border-cyber-neon/20 text-center">
        <p class="text-slate-500 text-sm">ComplianceCode.eu – Digital Sovereignty for the AI Era</p>
      </footer>
    </main>
  </div>
</Layout>

<script>
  // Mermaid: load and run with cyber-friendly theme
  (async () => {
    try {
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js';
      script.async = true;
      document.head.appendChild(script);
      await new Promise((res, rej) => { script.onload = res; script.onerror = rej; });
      mermaid.initialize({
        startOnLoad: false,
        theme: 'base',
        themeVariables: {
          primaryColor: '#0a0a0a',
          primaryTextColor: '#e2e8f0',
          primaryBorderColor: '#00f3ff',
          lineColor: '#00f3ff',
          secondaryColor: '#0d0d0d',
          tertiaryColor: '#10b981',
        },
      });
      await mermaid.run({ nodes: document.querySelectorAll('.mermaid') });
    } catch (_) {
      const el = document.querySelector('.mermaid');
      if (el) el.innerHTML = '<p class="text-slate-500">Diagram could not be loaded. See README for the workflow.</p>';
    }
  })();
</script>
